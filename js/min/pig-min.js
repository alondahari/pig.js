!function(){"use strict";function a(){e.addClass("cast"),i.addClass("spinner-cast")}function s(){e.removeClass("cast"),i.removeClass("spinner-cast")}var e=$(".screen"),i=$(".ring1"),t=$(".photo-modal"),o=$(".mozaicSlider"),c,n,r,d=1.3;$.fn.mozaic=function(){return this.each(function(){function s(a){if(Math.sqrt(a)%1===0)return Math.sqrt(a);for(var s=0,e=2;a>e;e++)if(a%e===0){if(a/e===s)return s;s=e}}function e(a,s,e,i){var t=Math.floor(a/i),o=Math.floor(s/e);return{width:t,height:o,scaleX:Math.floor(t*d)/t,scaleY:Math.floor(o*d)/o,scaleBoxX:Math.floor((t-1)*d)/t,scaleBoxY:Math.floor((o-1)*d)/o}}var i=$(this),o;i.hasClass("mozaic-init")?o=!1:(o=!0,i.addClass("mozaic-init"));var c=i.closest(".mozaicSlider"),n=i.closest(".mozaicSliderInner"),r=n.children(".mozaic"),h=r.length,l=i.data("number-of-images"),m={},g=c.width()<720?!0:!1,f=s(l),u=l/f,p=i.find(".mozaicFrame"),z=p.attr("src"),x=z.replace("main","thumbs"),v=p.width()/p.height();p.css({position:"absolute",opacity:1}),c.css(g?{"padding-top":1/v*100+"%",height:0}:{"padding-top":0,height:c.width()/v}),n.css("width",100*h+"%"),r.css({width:100/h+"%",height:"100%"}),g||r.css("width",Math.ceil(i.width())),m=e(i.width(),i.height(),f,u);for(var w=0;l>w;w++){var b=i.find(".mozaicItem")[w];b=$(b),g?b.addClass("small-mozaic"):b.removeClass("small-mozaic");var C;o?C=$('<div class="mozaicImageBox"></div>'):(C=i.find(".mozaicImageBox")[w],C=$(C));var k=w%u,I=Math.floor(w/u),M=m.width,B=m.height,E=i.width()-M*u,X=i.height()-B*f,Y=B*I,S=M*k,q=M*m.scaleX,y=B*m.scaleY;g&&(M=100/u+"%",B=100/f+"%",Y=100/f*I+"%",S=100/u*k+"%",E=100-m.width*u,X=100-m.height*f),C.css({top:Y,left:S,width:M,height:B,backgroundImage:'url("'+z+'")',backgroundSize:M*u+"px "+B*f+"px",backgroundPosition:-M*k+"px "+-B*I+"px"}),g&&C.css({backgroundImage:"none"}),b.css(g?{transform:"none",top:Y,left:S,width:M,height:B,backgroundImage:'url("'+x+'")',backgroundSize:100*u+"%"+100*f+"%",backgroundPosition:k*(100/(u-1))+"% "+I*(100/(f-1))+"%"}:{width:q,height:y,transform:"scale("+1/m.scaleX+","+1/m.scaleY+")",top:Y-B*(m.scaleY-1)/2+"px",left:S-M*(m.scaleX-1)/2+"px",backgroundImage:'url("'+x+'")',backgroundSize:q*u+"px "+y*f+"px",backgroundPosition:-q*k+"px "+-y*I+"px"}),g||(0===S?(C.addClass("leftEdge"),b.addClass("leftEdge"),b.css({left:0})):(w+1)%u===0&&(C.addClass("rightEdge"),b.addClass("rightEdge"),b.css({left:"-="+(M+E*m.scaleX)*(m.scaleX-1)/2+"px"})),0===Y?(C.addClass("topEdge"),b.addClass("topEdge"),b.css({top:0})):w+1>u*(f-1)&&(C.addClass("bottomEdge"),b.addClass("bottomEdge"),b.css({top:"-="+(B+X*m.scaleY)*(m.scaleY-1)/2}))),g||((w+1)%u===0&&(C.css("width","+="+E),b.css("width","+="+E*m.scaleX)),w+1>u*(f-1)&&(C.css("height","+="+X),b.css("height","+="+X*m.scaleY))),o&&C.appendTo(i)}$(".mozaicImageBox").on("click",function(){var s=$(this).siblings(".mozaicImageBox").andSelf().index(this),e=z.replace("main","image"+s);t.attr("src",e),a()}),g?$(".mozaicFrame").hide():$(".mozaicFrame").show()})},$(".mozaicItem").on({mouseenter:function(){var a=$(this);a.css("transform","scale(1, 1)"),a.siblings(".mozaicImageBox").eq(a.index()-1).css({transform:"scale("+d+", "+d+")","z-index":1e3})},mouseleave:function(){var a=$(this);a.css("transform","scale("+1/d+", "+1/d+")"),a.siblings(".mozaicImageBox").eq(a.index()-1).css({transform:"scale(1, 1)","z-index":0})},click:function(){var s=$(this),e=$(this).css("background-image").replace("url(","");e=e.replace(")",""),e=e.replace("thumbs","image"+(s.index()-1)),t.attr("src",e),a()}}),$(window).on({resize:function(){this.innerWidth<768?($(".event-image").css("height","auto"),$(".event").css("height","auto")):($(".event-image").css("height","400px"),$(".event").css("height","400px")),o.width()!==n&&(r||$(".mozaic").mozaic(),c.transition(null,0),n=c.mozaicWidth,r=o.width()<720?!0:!1)},keyup:function(a){27===a.keyCode&&(t.attr("src",""),s())}})}();