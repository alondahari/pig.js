function MozaicSlider(i,t){this.container=i,this.nav=t.show(),this.mozaic=this.container.find(".mozaic"),this.mozaicSlider=this.container.closest(".mozaicSlider"),this.mozaicLen=this.mozaic.length,this.current=0,this.transition(null,0)}function loadImage(i){return $.Deferred(function(t){var n=new Image;n.onload=function(){t.resolve(n)},n.onerror=function(){t.reject()},n.src=i,n.complete&&t.resolve(n)}).promise()}function loadMozaic(i,t){$.when(loadImage(i),loadImage(i.replace("main","thumbs"))).then(function(){t.find(".mozaicFrame").attr("src",i),$(".ring-text").hide(),t.mozaic()})}var imageIndex=-1;MozaicSlider.prototype.transition=function(i,t){if(this.container.animate({"margin-left":(i||-(this.current*this.mozaicSlider.width()))+"px"},t),this.container.find(".mozaic").length){var n=$(this.container.find(".mozaic")[this.current]);$(".curGallery").attr("value",n.data("index")),$galleryName.text(n.data("name")),$(".ring-text").show(),loadMozaic(n.find(".mozaicFrame").data("src"),n)}},MozaicSlider.prototype.setCurrent=function(i){var t=this.current;return t+="next"===i?1:-1,this.current=0>t?this.mozaicLen-1:t%this.mozaicLen,t};var container=$("div.mozaicSliderInner");slider=new MozaicSlider(container,$("#slider-nav")),slider.nav.find("a").on("click",function(){slider.setCurrent($(this).data("dir")),slider.transition()}),mozaicWidth=$mozaicSlider.width(),smallMozaic=720>mozaicWidth?!0:!1;